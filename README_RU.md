// # Torch TTS Setup

ะญัะพั ัะตะฟะพะทะธัะพัะธะน ะฟัะตะดะพััะฐะฒะปัะตั ะธะฝััััะบัะธะธ ะธ ัะฐะนะปั ะดะปั ัััะฐะฝะพะฒะบะธ ะธ ัะฐะฑะพัั ั `torch` ะธ `TTS` ะฝะฐ Python 3.10.16.

## 1๏ธโฃ ะฃััะฐะฝะพะฒะบะฐ

### ๐น 1.1 ะฃััะฐะฝะพะฒะบะฐ `pyenv`

**Windows:**
```bash
    winget install pyenv-win
```

**Ubuntu:**
```bash
    curl https://pyenv.run | bash
```

**macOS:**
```bash
    brew install pyenv
```

### ๐น 1.2 ะฃััะฐะฝะพะฒะบะฐ Python 3.10.16
```bash
    pyenv install 3.10.16
pyenv local 3.10.16
# ะัะธะฒัะทะบะฐ ะฒะตััะธะธ Python ะบ ัะตะบััะตะน ะฟะฐะฟะบะต
```

### ๐น 1.3 ะกะพะทะดะฐะฝะธะต ะธ ะฐะบัะธะฒะฐัะธั ะฒะธัััะฐะปัะฝะพะณะพ ะพะบััะถะตะฝะธั
```bash
    pyenv exec python -m venv venv
source venv/bin/activate
```

**ะะปั Windows (PowerShell):**
```powershell
pyenv exec python -m venv venv
venv\Scripts\Activate
```

### ๐น 1.4 ะฃััะฐะฝะพะฒะบะฐ ะทะฐะฒะธัะธะผะพััะตะน
```bash
    pip install -r requirements.txt
```

**ะะฑะฝะพะฒะปะตะฝะธะต ะทะฐะฒะธัะธะผะพััะตะน:**
```bash
    pip install --upgrade -r requirements.txt
```

### ๐น 1.5 ะัะพะฒะตัะบะฐ ะฒะตััะธะธ `torch`
```bash
    python -c "import torch; print(torch.__version__)"
```

### ๐น 1.6 ะัะพะฒะตัะบะฐ ะดะพัััะฟะฝัั ััััะพะนััะฒ (CUDA/MPS/CPU)
```bash
    python -c "import torch; print(f'CUDA: {torch.cuda.is_available()}, MPS: {torch.backends.mps.is_available()}')"
```

๐ **ะัะปะธ CUDA ะธ MPS ะพััััััะฒััั**, ะฑัะดะตั ะธัะฟะพะปัะทะพะฒะฐะฝ CPU.

---
## 2๏ธโฃ ะฃััะฐะฝะพะฒะบะฐ `torch` ั CUDA (ัะพะปัะบะพ ะดะปั Windows/Linux ั NVIDIA GPU)
```bash
    pip install torch==2.1.0+cu118 torchaudio==2.1.0+cu118 -f https://download.pytorch.org/whl/torch_stable.html
```

๐ ะะฐ macOS ะธัะฟะพะปัะทะพะฒะฐัั ััะฐะฝะดะฐััะฝัั ะฒะตััะธั `torch`, ั.ะบ. CUDA ะฝะต ะฟะพะดะดะตัะถะธะฒะฐะตััั.

---
## 3๏ธโฃ ะะฐะฟััะบ ัะตััะพะฒะพะณะพ ัะธะฝัะตะทะฐ ัะตัะธ
```bash
    python gen.py
```

---
## 4๏ธโฃ ะะฒัะพะผะฐัะธัะตัะบะฐั ัััะฐะฝะพะฒะบะฐ
ะะปั ะฑััััะพะน ัััะฐะฝะพะฒะบะธ ะผะพะถะฝะพ ะธัะฟะพะปัะทะพะฒะฐัั ัะบัะธะฟัั:

**Linux/macOS:**
```bash
    bash setup.sh
```

**Windows (PowerShell):**
```powershell
powershell -ExecutionPolicy Bypass -File setup.ps1
```

---
## 5๏ธโฃ ๐ ะะฐะฟััะบ ัะบัะธะฟัะฐ ั ัะฐะทะฝัะผะธ ะฟะฐัะฐะผะตััะฐะผะธ

**ะะปั macOS (MPS)**
```bash
    PYTORCH_ENABLE_MPS_FALLBACK=1 FORCE_DEVICE="mps" pyenv exec python gen.py "ะัะธะฒะตั, ะผะธั!"
```

๐น **PYTORCH_ENABLE_MPS_FALLBACK=1** โ ะฒะบะปััะฐะตั CPU fallback ะดะปั ะฝะตะฟะพะดะดะตัะถะธะฒะฐะตะผัั ะพะฟะตัะฐัะธะน ะฝะฐ MPS.  
๐น **FORCE_DEVICE="mps"** โ ะทะฐะดะฐะตั ะธัะฟะพะปัะทะพะฒะฐะฝะธะต Apple Metal (MPS).

---
**ะะปั Windows/Linux ั NVIDIA (CUDA)**
```bash
    FORCE_DEVICE="cuda" pyenv exec python gen.py "Hello, world!"
```

๐น **FORCE_DEVICE="cuda"** โ ะฒะบะปััะฐะตั GPU (NVIDIA).  
๐น **ะัะปะธ CUDA ะฝะต ะดะพัััะฟะฝะฐ**, ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฟะตัะตะบะปััะธััั ะฝะฐ CPU.

---
**ะะปั ัะฐะฑะพัั ะฝะฐ CPU**
```bash
    FORCE_DEVICE="cpu" pyenv exec python gen.py "ะัะธะฒะตั, CPU!"
```

๐น **FORCE_DEVICE="cpu"** โ ะทะฐััะฐะฒะปัะตั ัะฐะฑะพัะฐัั ัะพะปัะบะพ ะฝะฐ CPU.

---
**ะะปั ัะฐะฑะพัั ั RTX 4090 / 4080 / 3090**
```bash
    FORCE_DEVICE="cuda" python gen.py "ะะฟัะธะผะธะทะธัะพะฒะฐะฝะพ ะดะปั 4090!"
```

๐น ะะฟัะธะผะธะทะฐัะธั ัะตัะตะท `torch.backends.cudnn.benchmark = True` ะฒ ะบะพะดะต.

---
**ะะฑัะธะน ะฒัะทะพะฒ ะฑะตะท ัะฒะฝะพะณะพ ัะบะฐะทะฐะฝะธั (ะฐะฒัะพะฒัะฑะพั ััััะพะนััะฒะฐ)**
```bash
    pyenv exec python gen.py "ะัะธะฒะตั, ะฐะฒัะพะผะฐัะธัะตัะบะธะน ัะตะถะธะผ!"
```

๐น **ะกะบัะธะฟั ัะฐะผ ะพะฟัะตะดะตะปะธั** `cuda`, `mps` ะธะปะธ `cpu`, ะตัะปะธ `FORCE_DEVICE` ะฝะต ัะบะฐะทะฐะฝ.

---
## ๐ 6๏ธโฃ ะัะพะฒะตัะบะฐ ะดะพัััะฟะฝะพััะธ ััััะพะนััะฒ ะฟะตัะตะด ะทะฐะฟััะบะพะผ:
```bash
    python -c "import torch; print(f'CUDA: {torch.cuda.is_available()}, MPS: {torch.backends.mps.is_available()}')"
```

๐ **ะัะปะธ CUDA ะธ MPS ะพััััััะฒััั**, ะฑัะดะตั ะธัะฟะพะปัะทะพะฒะฐะฝ CPU.

๐ฅ **ะขะตะฟะตัั ัะบัะธะฟั ัะฝะธะฒะตััะฐะปะตะฝ ะดะปั macOS (MPS), Windows/Linux (CUDA) ะธ CPU!** ๐

---
# 7๏ธโฃ Text-to-Speech Generation with TTS

## 7.1 ะัะฟะพะปัะทะพะฒะฐะฝะธะต

**ะะตะฝะตัะฐัะธั ะฐัะดะธะพ ะธะท ัะตะบััะฐ**
```bash
    FORCE_DEVICE="cpu" pyenv exec python gen.py 'ะัะธะฒะตั, ะฐะฒัะพะผะฐัะธัะตัะบะธะน ัะตะถะธะผ. ะ ัะพั ะผะฝะต ะฝะพะณะธ!'
```

---
## 7.2 ะัะธะผะตั ะปะพะณะพะฒ

```plaintext
2025-02-27 03:21:07,401 - INFO -

===== ะะพะฒัะน ะทะฐะฟััะบ ัะบัะธะฟัะฐ =====
๐ฅ๏ธ ะัะฟะพะปัะทัะตะผ ััััะพะนััะฒะพ ะดะปั ะผะพะดะตะปะธ: cpu
๐ ะัะฟะพะปัะทัะตะผ ััััะพะนััะฒะพ ะดะปั ะฐัะดะธะพ: cpu
2025-02-27 03:21:12,717 - INFO - ะัะฟะพะปัะทัะตะผ ััััะพะนััะฒะพ ะดะปั ะผะพะดะตะปะธ: cpu
2025-02-27 03:21:12,717 - INFO - ะัะฟะพะปัะทัะตะผ ััััะพะนััะฒะพ ะดะปั ะฐัะดะธะพ: cpu
> tts_models/multilingual/multi-dataset/xtts_v2 is already downloaded.
> Using model: xtts
โณ ะัะตะผั ะทะฐะณััะทะบะธ ะผะพะดะตะปะธ: 22.58 ัะตะบ
2025-02-27 03:21:35,298 - INFO - ะัะตะผั ะทะฐะณััะทะบะธ ะผะพะดะตะปะธ: 22.58 ัะตะบ
๐๏ธ ะัะฟะพะปัะทัะตะผ ะณะพะปะพั ะธะท ัะตะผะฟะปะฐ daniel.wav
๐ข ะขะตะบัั ะดะปั ะณะตะฝะตัะฐัะธะธ: ะัะธะฒะตั, ะฐะฒัะพะผะฐัะธัะตัะบะธะน ัะตะถะธะผ. ะ ัะพั ะผะฝะต ะฝะพะณะธ!
> Processing time: 8.536 ัะตะบ

๐ **ะะตัะฐะปัะฝัะต ะผะตััะธะบะธ:**
โณ ะัะตะผั ะทะฐะณััะทะบะธ ะผะพะดะตะปะธ: 22.58 ัะตะบ
โ๏ธ ะัะตะผั ะณะตะฝะตัะฐัะธะธ ะฐัะดะธะพ: 8.54 ัะตะบ
๐ FPS (ะบะฐะดัั ะฒ ัะตะบัะฝะดั): 0.12
๐พ ะัะฟะพะปัะทะพะฒะฐะฝะธะต ะฟะฐะผััะธ (ะดะพ/ะฟะพัะปะต): 3571.59 MB โ 3658.97 MB
๐ ะะฐะทะผะตั ะฒััะพะดะฝะพะณะพ ัะฐะนะปะฐ: 0.22 MB
โก CPU ะทะฐะณััะทะบะฐ: 25.3%
๐ฅ๏ธ GPU: N/A
๐ฅ TFLOPS (ัะตะพัะตัะธัะตัะบะธะต): 0.00 TFLOPS
โ ะคะฐะนะป output.wav ัะณะตะฝะตัะธัะพะฒะฐะฝ!
```

---
๐ **ะะพะฟะพะปะฝะธัะตะปัะฝะพ**
1. **ะะปั ะฟะพะฒััะตะฝะธั ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ ะฝะฐ CUDA** โ `torch.backends.cudnn.benchmark = True` (ัะถะต ะฒะบะปััะตะฝะพ ะฒ ะบะพะดะต).
2. **ะะปั ัะฐะฑะพัั ะฝะฐ Mac MPS** โ `PYTORCH_ENABLE_MPS_FALLBACK=1` (ะฒะบะปััะตะฝ ะฟะพ ัะผะพะปัะฐะฝะธั).
3. **ะัะปะธ `gen.py` ะฟะฐะดะฐะตั ะธะท-ะทะฐ ะฝะตัะพะฒะผะตััะธะผะพััะธ ะฑะธะฑะปะธะพัะตะบ** โ ะฟะพะฟัะพะฑัะนัะต ะพะฑะฝะพะฒะธัั ะทะฐะฒะธัะธะผะพััะธ:
```bash
    pip install --upgrade -r requirements.txt
```
    
๐ **ะขะตะฟะตัั ะฒะฐั ะฟัะพะตะบั ะณะพัะพะฒ ะบ ัะฐะฑะพัะต ั ัะตะบัั-ัั-ัะฟะธั ะฝะฐ ะปัะฑะพะผ ััััะพะนััะฒะต!** ๐๐ฅ
